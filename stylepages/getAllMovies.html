<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link href="../css/layout.css" rel="stylesheet" type="text/css" media="screen"/>
    <title>MovieMain</title>
</head>
<body> 
        <infobox>
        <h3>Detailliertere Filminformationen</h3>
        <p id='showDetail'></p>
        </infobox><br /><br /><br /><br /><br /><br /><br /><br /><br />
        <infolist>
        <p id="myMovie"> </p>
        </infolist>
        <script>
            function loadDoc() {
            	
            	var myObj, x;
            	var txt = "";
                var xhttp = new XMLHttpRequest();
                
                xhttp.onreadystatechange = function () {
                    if (this.readyState == 4 && this.status == 200) 
                    	
                    	myObj = JSON.parse(this.responseText);
                    	txt += "<table border='0'>";
                    	                    	
                    	for (x in myObj) {
                            txt += "<tr><td>" + myObj[x].titel + "</td><td><button type='button' class='btn btn-info' onclick='detailMovie("+x+")'>Show Details</button> </td></tr>";
                            //wert immer so uebergeben: + x +
                        }
                        txt += "</table>";        
                        document.getElementById("myMovie").innerHTML = txt;        
                                            	
                }; 
                                                                 
                xhttp.open("GET", "../json/movielist.json", true);
                //nochmal open macht nur letzte list auf "addliste.json", 
                xhttp.send();
            }
            window.onload = loadDoc;
        </script>
        
        <script>
        function detailMovie(x){
        	var myObj;
        	var i = x;
        	var txt = "";
        	var xhttp = new XMLHttpRequest();
            
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200)
                	
                	myObj = JSON.parse(this.responseText);                  	
                    txt = "<table border='0'><tr><td>Titel: </td><td>"+ myObj[i].titel + "</td></tr><tr><td>Regisseur: </td><td>" + myObj[i].regie + "</td></tr><tr><td>Erscheinungsjahr: </td><td>" 
                    + myObj[i].jahr+ "</td></tr><tr><td>Genre: </td><td>" + myObj[i].genre+ "</td></tr><tr><td>Schauspieler: </td><td>" + myObj[i].schauspieler + "</table>";
               		document.getElementById("showDetail").innerHTML = txt;
           		};
           xhttp.open("GET", "../json/movielist.json", true);
           xhttp.send();
        }
        </script>
        
                        
</body>
</html>